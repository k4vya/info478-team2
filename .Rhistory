for (i in 1:length(low)) {
if (low[i] == 1) {
num_underweight <- num_underweight + 1
}
}
print(num_underweight)
#see how many people are underweight for the smokers
num_f_uw <- 0
for (i in 1:length(selected_col)) {
if (low[i] == 1 && selected_col[i] == 1)  {
num_f_uw <- num_f_uw + 1
}
}
print(num_f_uw)
# see how many people are underweight for NON smokers
num_nf_uw <- num_underweight - num_f_uw
#calculate the risk vibes pt 1
risk_f_uw <- num_f_uw/num_factor
risk_nf_uw <- num_nf_uw/num_non_factor
relative_risk <- risk_f_uw/risk_nf_uw
return(relative_risk)
}
smoke <- calculate_rel_risk(bw, "smoke")
ht <- calculate_rel_risk(bw, "ht")
ftv <- calculate_rel_risk(bw, "ftv")
age <- calculate_rel_risk(bw, "age")
measures <- c(smoke, ht, ftv, age)
chart_data <- data.frame(inputs, measures)
measures <- c(smoke, ht, ftv, age)
inputs <- c("Smoking Status", "Hypertension Status", "0 Prenatal Visits", "Birth before 20")
chart_data <- data.frame(inputs, measures)
View(chart_data)
bw_chart <- ggplot(data = chart_data, aes(x = inputs, y = measures)) + geom_bar()
bw_chart
bw_chart <- ggplot(data = chart_data, aes(x = inputs, y = measures)) + geom_bar(stat = "identity")
bw_chart
ftv <- 1/ftv
smoke <- calculate_rel_risk(bw, "smoke")
ht <- calculate_rel_risk(bw, "ht")
ftv <- calculate_rel_risk(bw, "ftv")
ftv <- 1/ftv
age <- calculate_rel_risk(bw, "age")
measures <- c(smoke, ht, ftv, age)
inputs <- c("Smoking Status", "Hypertension Status", "0 Prenatal Visits", "Birth before 20")
chart_data <- data.frame(inputs, measures)
bw_chart <- ggplot(data = chart_data, aes(x = inputs, y = measures)) + geom_bar(stat = "identity")
bw_chart
bw_chart
bw_chart
bw_chart
knitr::opts_chunk$set(echo = TRUE)
source("analysis.R")
or_table
scatter_odds_year
scatter_odds_lat
bw_chart
install.packages(epitools)
install.packages("epitools")
library(epitools)
endo_epitab <- epitab(hyp_table, method=c("oddsratio"), verbose = F)
endo_epitab <- epitab(endo_data, method=c("oddsratio"), verbose = F)
View(endo_data)
endo_epitab <- epitab(endo_data$gall,y = NULL, method=c("oddsratio"), verbose = F)
View(bcg_data_odds)
num_with_cancer <- nrow(filter(endo_data,d == 1) )
nrow(endo_data)
num_without_cancer <- (nrow(endo_data) - num_with_cancer)
no_cancer_yes_gallbladder <- nrow(filter(endo_data, d==1, gall=="yes" ))
no_cancer_yes_gallbladder <- nrow(filter(endo_data, d==1, gall=="Yes" ))
no_cancer_yes_gallbladder <- nrow(filter(endo_data, d==0, gall=="Yes" ))
yes_cancer_yes_gallbladder <- nrow(filter(endo_data, d==1, gall=="Yes" ))
no_cancer_no_gall <- num_without_cancer - no_cancer_yes_gallbladder
yes_cancer_no_gall <- num_with_cancer - yes_cancer_yes_gallbladder
gall_matrx <- matrix(data = c(no_cancer_yes_gallbladder, yes_cancer_yes_gallbladder,
no_cancer_no_gall, yes_cancer_no_gall), nrow = 2, ncol = 2)
gall_matrx
gall_matrx <- matrix(data = c(no_cancer_yes_gallbladder,  no_cancer_no_gall,
yes_cancer_yes_gallbladder,yes_cancer_no_gall), nrow = 2, ncol = 2)
gall_matrx
endo_gall_epitab <- epitab(gall_matrx,y = NULL, method=c("oddsratio"), verbose = F)
endo_gall_epitab
no_cancer_yes_ht <- nrow(filter(endo_data, d==0, hyp=="Yes" ))
no_cancer_no_ht <- num_without_cancer - no_cancer_yes_ht
no_cancer_yes_ht <- nrow(filter(endo_data, d==0, hyp=="Yes" ))
no_cancer_no_ht <- num_without_cancer - no_cancer_yes_ht
yes_cancer_yes_ht <- nrow(filter(endo_data, d==1, hyp=="Yes" ))
yes_cancer_no_ht <- num_with_cancer - yes_cancer_yes_ht
ht_matrx <- matrix(data = c(no_cancer_yes_ht,  no_cancer_no_ht,
yes_cancer_yes_ht,yes_cancer_no_ht), nrow = 2, ncol = 2)
endo_ht_epitab <- epitab(ht_matrx,y = NULL, method=c("oddsratio"), verbose = F)
endo_ht_epitab
no_cancer_yes_ob <- nrow(filter(endo_data, d==0, ob=="Yes" ))
no_cancer_no_ob <- num_without_cancer - no_cancer_yes_ob
yes_cancer_yes_ob <- nrow(filter(endo_data, d==1, ob=="Yes" ))
yes_cancer_no_ob <- num_with_cancer - yes_cancer_yes_ob
ob_matrx <- matrix(data = c(no_cancer_yes_ob,  no_cancer_no_ob,
yes_cancer_yes_ob,yes_cancer_no_ob), nrow = 2, ncol = 2)
endo_ob_epitab <- epitab(ob_matrx,y = NULL, method=c("oddsratio"), verbose = F)
endo_ob_epitab
endo_gall_epitab[0]
endo_gall_epitab[1]
endo_gall_epitab[1][0]
endo_gall_epitab$tab
endo_gall_epitab$tab[1]
endo_gall_epitab$tab[2]
endo_gall_epitab$tab[3]
endo_gall_epitab$tab[10]
gall_oddratio <- 1/endo_gall_epitab$tab[10]
ht_oddratio <- 1/endo_ht_epitab$tab[10]
obs_oddratio <- 1/endo_ob_epitab$tab[10]
endo_measure <- c(gall_oddratio, ht_oddratio, obs_oddratio)
endo_inputs <- c("Gallbladder", "Hypertension", "Obesity")
endo_chart_data <- data.frame(endo_inputs, endo_measure)
endo_chart <- ggplot(data = endo_chart_data, aes(x = endo_inputs, y = endo_measure)) + geom_bar(stat = "identity")
endo_chart
endo_chart
endo_chart
# Script in which you should do your analysis described on Canvas
library(tidyverse)
bcg_data<-HSAUR::BCG
#odds_liver_disease <- 75/25
#odds_no_liver_disease <- 50/100
#OR_liver_alcohol <- odds_liver_disease/odds_no_liver_disease
#OR_liver_alcohol
#TB 1.1
bcg_data_odds <- bcg_data %>%
mutate(BCGNoTB = BCGVacc - BCGTB, NoVaccNoTB = NoVacc - NoVaccTB) %>%
mutate(odds_tb_vacc = BCGTB/NoVaccTB, odds_notb_vacc = BCGNoTB/NoVaccNoTB) %>%
mutate(odds_ratio = odds_tb_vacc/odds_notb_vacc)
or_table <- bcg_data_odds %>%
select(Study, Year, odds_ratio)
#TB 1.2
scatter_odds_year <- ggplot(or_table, aes(x=Year, y=odds_ratio)) + geom_point()
scatter_odds_lat <- ggplot(bcg_data_odds, aes(x=Latitude, y=odds_ratio)) + geom_point()
# TB 1.4
bcg_data_odds <- bcg_data_odds %>%
mutate(risk_vcc_tb = BCGTB/BCGVacc, risk_novcc_tb = NoVaccTB/NoVacc) %>%
mutate(relative_risk = risk_vcc_tb/risk_novcc_tb)
stats_table_tb <- bcg_data_odds %>%
select(Study, Year, odds_ratio, relative_risk)
tb_odd_rel <- ggplot(stats_table_tb, aes(x=odds_ratio, y=relative_risk)) + geom_point()
##### ----------------LOW BIRTH WEIGHT----------------------
bw<- MASS::birthwt
# playing around with data
num_rows <- nrow(bw)
num_underweight <- nrow(filter(bw, low == 1))
59/189
num_uw_smoke <- nrow(filter(bw, low == 1, smoke==1))
num_smoke <- nrow(filter(bw, smoke==1))
num_nuw_smoke <- nrow(filter(bw, low == 0, smoke==1))
test <- num_smoke/num_nuw_smoke
calculate_rel_risk <- function(dataset, colnm) {
low <- dataset[["low"]]
total_babies <- length(low)
selected_col <- dataset[[colnm]]
# see how many people "smoke"/input var vs dont
num_factor <- 0
if (colnm == "ftv") {
for (i in 1:length(selected_col)) {
if (selected_col[i] >= 1) {
selected_col[i] = 1
}
}
}
if (colnm == "age") {
for (i in 1:length(selected_col)){
if (selected_col[i] >= 20) {
selected_col[i] = 1
} else {
selected_col[i] = 0
}
}
}
for (i in 1:length(selected_col)) {
if (selected_col[i] == 1){
num_factor <- num_factor + 1
}
}
print(num_factor) # num smoking
num_non_factor <- total_babies - num_factor
print(num_non_factor) # num non smoking
num_underweight <- 0
for (i in 1:length(low)) {
if (low[i] == 1) {
num_underweight <- num_underweight + 1
}
}
print(num_underweight)
#see how many people are underweight for the smokers
num_f_uw <- 0
for (i in 1:length(selected_col)) {
if (low[i] == 1 && selected_col[i] == 1)  {
num_f_uw <- num_f_uw + 1
}
}
print(num_f_uw)
# see how many people are underweight for NON smokers
num_nf_uw <- num_underweight - num_f_uw
#calculate the risk vibes pt 1
risk_f_uw <- num_f_uw/num_factor
risk_nf_uw <- num_nf_uw/num_non_factor
relative_risk <- risk_f_uw/risk_nf_uw
return(relative_risk)
}
smoke <- calculate_rel_risk(bw, "smoke")
ht <- calculate_rel_risk(bw, "ht")
ftv <- calculate_rel_risk(bw, "ftv")
#ftv <- 1/ftv
age <- calculate_rel_risk(bw, "age")
measures <- c(smoke, ht, ftv, age)
inputs <- c("Smoking Status", "Hypertension Status", "0 Prenatal Visits", "Birth before 20")
chart_data <- data.frame(inputs, measures)
bw_chart <- ggplot(data = chart_data, aes(x = inputs, y = measures)) + geom_bar(stat = "identity")
### ----------- CANCER ----------------
library(Epi)
library(epitools)
data("bdendo")
endo_data <- bdendo
endo_epitab <- epitab(endo_data$gall,y = NULL, method=c("oddsratio"), verbose = F)
#make 2x2 matrix for EVERY disease + cancer. hypertension, gall, obesity
# then youll have 3 tables to plug into epitab.
# Gallbladder
nrow(endo_data)
num_with_cancer <- nrow(filter(endo_data,d == 1) )
num_without_cancer <- (nrow(endo_data) - num_with_cancer)
no_cancer_yes_gallbladder <- nrow(filter(endo_data, d==0, gall=="Yes" ))
no_cancer_no_gall <- num_without_cancer - no_cancer_yes_gallbladder
yes_cancer_yes_gallbladder <- nrow(filter(endo_data, d==1, gall=="Yes" ))
yes_cancer_no_gall <- num_with_cancer - yes_cancer_yes_gallbladder
gall_matrx <- matrix(data = c(no_cancer_yes_gallbladder,  no_cancer_no_gall,
yes_cancer_yes_gallbladder,yes_cancer_no_gall), nrow = 2, ncol = 2)
endo_gall_epitab <- epitab(gall_matrx,y = NULL, method=c("oddsratio"), verbose = F)
gall_oddratio <- 1/endo_gall_epitab$tab[10]
# Hypertension
no_cancer_yes_ht <- nrow(filter(endo_data, d==0, hyp=="Yes" ))
no_cancer_no_ht <- num_without_cancer - no_cancer_yes_ht
yes_cancer_yes_ht <- nrow(filter(endo_data, d==1, hyp=="Yes" ))
yes_cancer_no_ht <- num_with_cancer - yes_cancer_yes_ht
ht_matrx <- matrix(data = c(no_cancer_yes_ht,  no_cancer_no_ht,
yes_cancer_yes_ht,yes_cancer_no_ht), nrow = 2, ncol = 2)
endo_ht_epitab <- epitab(ht_matrx,y = NULL, method=c("oddsratio"), verbose = F)
ht_oddratio <- 1/endo_ht_epitab$tab[10]
# Obesity
no_cancer_yes_ob <- nrow(filter(endo_data, d==0, ob=="Yes" ))
no_cancer_no_ob <- num_without_cancer - no_cancer_yes_ob
yes_cancer_yes_ob <- nrow(filter(endo_data, d==1, ob=="Yes" ))
yes_cancer_no_ob <- num_with_cancer - yes_cancer_yes_ob
ob_matrx <- matrix(data = c(no_cancer_yes_ob,  no_cancer_no_ob,
yes_cancer_yes_ob,yes_cancer_no_ob), nrow = 2, ncol = 2)
endo_ob_epitab <- epitab(ob_matrx,y = NULL, method=c("oddsratio"), verbose = F)
obs_oddratio <- 1/endo_ob_epitab$tab[10]
endo_measure <- c(gall_oddratio, ht_oddratio, obs_oddratio)
endo_inputs <- c("Gallbladder", "Hypertension", "Obesity")
endo_chart_data <- data.frame(endo_inputs, endo_measure)
endo_chart <- ggplot(data = endo_chart_data, aes(x = endo_inputs, y = endo_measure)) + geom_bar(stat = "identity")
knitr::opts_chunk$set(echo = TRUE)
source("analysis.R")
library(tidyverse)
setwd("C:/Users/kavya/Desktop/info478/info478-team2")
test <- read.csv("data/pharma_rev_2009_2012")
test <- read.csv("/data/pharma_rev_2009_2012")
test <- read.csv("pharma_rev_2009_2012")
setwd("C:/Users/kavya/Desktop/info478/info478-team2")
test <- read.csv("pharma_rev_2009_2012")
test <- read.csv("./data/pharma_rev_2009_2012")
test <- read.csv("/data/pharma_rev_2009_2012")
test <- read.csv("data/pharma_rev_2009_2012.csv")
View(test)
typeof(test$Revenue_millions)
test$Revenue_millions <- as.numeric(as.character(test$Revenue_millions))
test <- read.csv("data/pharma_rev_2009_2012.csv")
test$Revenue_millions <-  as.numeric(test$Revenue_millions)
test <- read.csv("data/pharma_rev_2009_2012.csv")
test <- read.csv("data/pharma_rev_2009_2012.csv")
test$Revenue_millions =  as.numeric(test$Revenue_millions)
test <- read.csv("data/pharma_rev_2009_2012.csv")
typeof(test$Revenue_millions)
pharma_rev_data <- read.csv("data/pharma_rev_2009_2012.csv")
pharma_rev_data$Revenue_millions <- gsub(",","",pharma_rev_data$Revenue_millions)
View(pharma_rev_data)
pharma_rev_data$Revenue_millions =  as.numeric(pharma_rev_data$Revenue_millions)
typeof(pharma_rev_data$Revenue_millions)
setwd("C:/Users/kavya/Desktop/info478/a2-k4vya")
setwd("C:/Users/kavya/Desktop/info478/a1-k4vya")
deaths_data <- read.csv('data/deaths.csv')
le_data <- read.csv('data/life_expectancy.csv')
ylds_data <- read.csv('data/ylds.csv')
# ---------------------------PREPPING METRICS -------------------------------
# add life expectantcy
deaths_df <- merge(deaths_data, le_data, by="age")
names(deaths_df)[5] <- 'life_expectancy'
# add YLDS
deaths_df <- merge(deaths_df, ylds_data, by=c("age", "cause_name", "sex"))
#calculate YLLs
# first fix age groups
deaths_df <- deaths_df %>%
mutate(age = substr(age, 1, 2))
deaths_df$age <- as.numeric(as.character(deaths_df$age))
deaths_df <- deaths_df %>%
mutate(ylls = ((life_expectancy - age)*deaths) )
# calculate DALYs
deaths_df <- deaths_df %>%
mutate(dalys = (ylls + ylds) )
View(deaths_df)
cause_df <- aggregate(dalys ~ cause_name, data = deaths_df, FUN = mean, na.rm = TRUE)
View(cause_df)
cause_df <- aggregate(dalys, ylds ~ cause_name, data = deaths_df, FUN = mean, na.rm = TRUE)
cause_ylds <- aggregate(ylds ~ cause_name, data = deaths_df, FUN = mean, na.rm = TRUE)
top_10_cause_ylds <- cause_ylds %>%
arrange(desc(ylds)) %>%
top_n(10)
View(top_10_cause_ylds)
cause_chart_ylds <- ggplot(top_10_cause_ylds, aes(x = cause_name, y = ylds)) +
geom_bar(stat = "identity") +
labs(title = "Burden by Cause", x = "Cause Name", y = "Avg YLDS") +
coord_flip()
knitr::opts_chunk$set(echo = TRUE)
source("code.R")
cause_chart
cause_chart_ylds
View(age_df)
age_df_ylds <- aggregate(abs(ylds) ~ age, data = deaths_df, FUN = median, na.rm = TRUE)
names(age_df_ylds)[2] <- 'ylds'
burden_chart_ylds <- ggplot(age_df_ylds, aes(x = age, y = ylds)) +
geom_bar(stat = "identity") +
labs(title = "Burden by Age", x = "Age", y = "Median YLDS")
burden_chart
burden_chart_ylds
gender_df_dalys <- aggregate(dalys ~ sex + cause_name, data = deaths_df, FUN = median, na.rm = TRUE)
gender_df_dalys <- gender_df_dalys%>%
arrange(desc(cause_name)) %>%
top_n(20)
gender_gbar_dalys <- ggplot(gender_df_dalys, aes(fill=sex, y=dalys, x=cause_name)) +
geom_bar(position="dodge", stat="identity") +
coord_flip()
gender_gbar
gender_gbar_dalys
setwd("C:/Users/kavya/Desktop/info478/info478-team2")
library(tidyverse)
# ---------- cleaning ------------------
pharma_rev_data <- read.csv("data/pharma_rev_2009_2012.csv")
pharma_rev_data$Revenue_millions <- gsub(",","",pharma_rev_data$Revenue_millions)
typeof(pharma_rev_data$Revenue_millions)
pharma_rev_data$Revenue_millions =  as.numeric(pharma_rev_data$Revenue_millions)
View(pharma_rev_data)
od_data <- read.csv("data/overdose_1999_2014.csv")
View(od_data)
typeof(od_data$Year)
typeof(pharma_rev_data$Year)
meep <- pharma_rev_data %>%
groupby(Year) %>%
summarize(Sum_Revenue = sum(Revenue_millions))
meep <- pharma_rev_data %>%
group_by(Year) %>%
summarize(Sum_Revenue = sum(Revenue_millions))
View(meep)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths))
typeof(od_data$Deaths)
od_data$Deaths = as.numeric(od_data$Deaths)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths))
View(herm)
od_data %>% drop_na(Deaths)
View(od_data)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths))
View(herm)
od_data %>% drop_na()
od_data<- od_data %>% drop_na(Deaths)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths))
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths)) %>%
filter(Year >= 2009 && Year <= 2012)
View(herm)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths))
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths)) %>%
filter(Year > 2009)
View(herm)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths))
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths)) %>%
filter(Year >= 2009)
View(herm)
herm <- od_data %>%
group_by(Year) %>%
summarize(deaths_total = sum(Deaths)) %>%
filter(Year >= 2009, Year <= 2012)
deaths_sales <- data.frame(herm$Year, herm$deaths_total, meep$Sum_Revenue)
View(deaths_sales)
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total, y = meep.sum_revenue))
+ geom_point()
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total, y = meep.sum_revenue)) + geom_point()
comp_scatter
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total, y = meep.Sum_revenue)) + geom_point()
comp_scatter
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total, y = meep.Sum_Revenue)) + geom_point()
comp_scatter
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total,
y = meep.Sum_Revenue)) + geom_point() + geom_text(label = rownames(deaths_sales))
comp_scatter
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total,
y = meep.Sum_Revenue)) + geom_point() + geom_text(label = rownames(deaths_sales$herm.Year))
comp_scatter
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total,
y = meep.Sum_Revenue)) + geom_point() + geom_text(label = deaths_sales$herm.Year)
comp_scatter
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total,
y = meep.Sum_Revenue)) + geom_point() + geom_text(label = deaths_sales$herm.Year)
+ labs(title = "Opiate Related Deaths vs Pharma Company Revenues, 2009 - 2012", x = "Deaths by Opiates", y = "Pharma Company Revenues (millions)")
comp_scatter <- ggplot(data = deaths_sales, aes(x = herm.deaths_total,
y = meep.Sum_Revenue)) + geom_point() + geom_text(label = deaths_sales$herm.Year) + labs(title = "Opiate Related Deaths vs Pharma Company Revenues, 2009 to 2012", x = "Deaths by Opiates", y = "Pharma Company Revenues (millions)")
comp_scatter
setwd("C:/Users/kavya/Desktop/info478/info478-team2")
library(tidyverse)
library(dplyr)
library(ggplot2)
library(tidyverse)
library(reshape)
#mdata <- melt(mydata, id=c("id","time"))
# Set up data
state_income <- read.csv("data/household_median_income_2017.csv")
overdose_deaths <- read.csv("data/drug_overdose_deaths.csv")
# Merge Datasets
income_vs_deaths <- merge(state_income, overdose_deaths, by = 'State')
income_vs_deaths_2017 <- income_vs_deaths %>% select(State, X2017, X2017.Number.of.Deaths)
# Making plot
ggplot(income_vs_deaths_2017, aes(fill=X2017, y=X2017.Number.of.Deaths, x=State)) +
geom_bar(position="dodge", stat="identity")
ggplot() boxplot(income_vs_deaths_2017)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(tidyverse)
library(reshape)
mdata <- melt(mydata, id=c("id","time"))
# Set up data
state_income <- read.csv("data/household_median_income_2017.csv")
overdose_deaths <- read.csv("data/drug_overdose_deaths.csv")
# Merge Datasets
income_vs_deaths <- merge(state_income, overdose_deaths, by = 'State')
income_vs_deaths_2017 <- income_vs_deaths %>% select(State, X2017, X2017.Number.of.Deaths)
# Making plot
ggplot(income_vs_deaths_2017, aes(fill=X2017, y=X2017.Number.of.Deaths, x=State)) +
geom_bar(position="dodge", stat="identity")
ggplot() boxplot(income_vs_deaths_2017)
View(income_vs_deaths_2017)
mdata <- melt(income_vs_deaths_2017, id=State)
library(reshape)
install.packages("reshape")
library(reshape)
mdata <- melt(income_vs_deaths_2017, id=State)
mdata <- melt(income_vs_deaths_2017, id="State")
View(mdata)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(tidyverse)
library(reshape)
# Set up data
state_income <- read.csv("data/household_median_income_2017.csv")
overdose_deaths <- read.csv("data/drug_overdose_deaths.csv")
# Merge Datasets
income_vs_deaths <- merge(state_income, overdose_deaths, by = 'State')
income_vs_deaths_2017 <- income_vs_deaths %>% select(State, X2017, X2017.Number.of.Deaths)
names(income_vs_deaths_2017)[2] <- "income"
names(income_vs_deaths_2017)[3] <- "deaths"
mdata <- melt(income_vs_deaths_2017, id="State")
# Making plot
income_vs_deaths_2017_plot <- ggplot(mdata, aes(fill=value, y=variable, x=State)) +
geom_bar(position="dodge", stat="identity")
View(income_vs_deaths_2017_plot)
View(income_vs_deaths_2017)
View(mdata)
typeof(mdata$value)
typeof(income_vs_deaths_2017$income)
typeof(income_vs_deaths_2017$deaths)
income_vs_deaths_2017$income <- gsub(",","",income_vs_deaths_2017$income)
typeof(income_vs_deaths_2017$income)
income_vs_deaths_2017$income =  as.numeric(income_vs_deaths_2017$income)
View(income_vs_deaths_2017)
typeof(income_vs_deaths_2017$income)
mdata <- melt(income_vs_deaths_2017, id="State")
View(mdata)
income_vs_deaths_2017_plot <- ggplot(mdata, aes(fill=value, y=variable, x=State)) +
geom_bar(position="dodge", stat="identity")
income_vs_deaths_2017_plot
# Making plot
income_vs_deaths_2017_plot <- ggplot(mdata, aes(fill=variable, y=value, x=State)) +
geom_bar(position="dodge", stat="identity")
typeof(mdata$value)
income_vs_deaths_2017_plot <- ggplot(mdata, aes(fill=variable, y=value, x=State)) +
geom_bar(position="dodge", stat="identity")
income_vs_deaths_2017_plot
income_vs_deaths_2017_plot <- ggplot(mdata, aes(fill=variable, y=value, x=State)) +
geom_bar(position="dodge", stat="identity") +geom_flip()
income_vs_deaths_2017_plot <- ggplot(mdata, aes(fill=variable, y=value, x=State)) +
geom_bar(position="dodge", stat="identity") + coord_flip()
income_vs_deaths_2017_plot
